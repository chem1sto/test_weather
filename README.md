# Сервис получения информации о погоде в любом городе
## Тестовое задание на позицию "Junior Python разработчик"

## О проекте
&ensp; &nbsp; В данном проекте реализован сервис для получения информации о
ближайшей погоде в любом выбранном пользователем городе. Пользовательский
интерфейс сервиса — одна страница с формой. Всего одно поле в форме, которое
принимает название интересующего пользователя города.

В проекте реализованы:
- подсказки в виде списка при вводе интересующего города
- история поиска для каждого пользователя
- API, с помощью которого можно увидеть статистику запросов по городам
- тестирование view-функций, тестирование API-эндпоинтов, интеграционные тесты
- контейнеризация с помощью Docker

## Технологии
- Python
- Flask
- requests
- coverage
- pre-commit

## Как запустить проект

### Запуск проекта в dev-режиме
1. Клонировать репозиторий и перейти в него в командной строке:
    ```bash
    git clone git@github.com:chem1sto/test_weather.git
    ```
2. Создать и активировать виртуальное окружение:
    ```bash
    cd ./test_weather/ && python3 -m venv venv
    ```
    * Для Linux/macOS
    ```bash
    source venv/bin/activate
    ```
    * Для Windows
    ```shell
    source venv/scripts/activate
    ```
3. Установить зависимости из файла requirements.txt:
   ```bash
   python3 -m pip install --upgrade pip
   pip install -r requirements.txt
   ```
4. Создайте переменные окружения в основной папке проекта
    ```bash
    touch .env
    ```
5. Добавьте ваши данные в файл .env (подробнее в .env.example)
    ```
    FLASK_DEBUG=True
    FLASK_RUN_PORT=5000
    FLASK_SECRET_KEY="Секретный ключ"
    ```
6. Для запуска проекта необходимо выполнить команду, находясь в папке с
проектом:
   ```bash
   flask run
   ```
7. Запущенный проект доступен по ссылке: [локальный сервер](http://127.0.0.1:5000/)

### Локальный запуск проекта в Docker контейнерах
1. Убедитесь, что Docker установлен:
    ```bash
   docker --version
    ```
    Если инструмента нет на компьютере, то его можно установить с
[этого официального сайта](https://docs.docker.com/engine/install/)
2. Скачайте образ проекта с DockerHub:
   ```bash
   docker pull chemisto/test_weather:latest
   ```
   Или создайте новый Docker образ. Для этого из корневой папки проекта
выполните команду:
   ```bash
   docker build -t test_weather .
   ```
3. Убедитесь, что в вашем файле .env корректные значения для переменных:
    ```
    FLASK_DEBUG=True
    FLASK_RUN_PORT=5000
    FLASK_SECRET_KEY="Секретный ключ"
    ```
4. Добавьте скачанный образ в Docker контейнер и запустите его:
    ```bash
    docker run chemisto/test_weather:latest
    ```
   Если вы создали Docker образ, то тогда его добавьте в Docker контейнер и
запустите:
    ```bash
    docker run test_weather:latest
    ```
5. Запущенный проект доступен по ссылке: [локальный сервер](http://0.0.0.0:5000/)

## Использование
Основной функционал реализован на [главной странице](http://127.0.0.1:5000/),
если проект запущен не из Docker контейнера. Если из Docker контейнера, то
нужно зайти на эту [главную страницу](http://0.0.0.0:5000/).

Для сброса истории поиска можно воспользоваться страницей clear_history.
Ссылка в [Docker контейнере](http://0.0.0.0:5000/clear_history/),
ссылка [для dev сервера](http://127.0.0.1:5000/clear_history/).

API для получения статистику запросов городов доступа по эндпоинту
/api/cities/.
Для Docker контейнера: http://0.0.0.0:5000/api/city_stats/
Для dev сервера: http://127.0.0.1:5000/api/city_stats/

## Тестирование
Для запуска авто тестирования воспользуйтесь командой из папки с проектом:
   ```bash
   pytest
   ```

## Автор
[Васильев Владимир](https://github.com/chem1sto)

## Лицензия
Пожалуйста, ознакомьтесь с [MIT license](https://github.com/chem1sto/test_mails_messages_integration?tab=MIT-1-ov-file)
